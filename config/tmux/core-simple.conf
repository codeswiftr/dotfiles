# ============================================================================
# Tmux Core Configuration (Simplified)
# Essential settings only - no bloat
# ============================================================================

# ----- Basic Server Settings -----
set -g default-command "$SHELL"
set -g prefix C-a
bind-key C-a send-prefix
unbind C-b

# ----- Display & Terminal -----
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color*:Tc"

# ----- Mouse Support (Modern & Intuitive) -----
set -g mouse on

# ----- Sensible Defaults -----
set -g base-index 1                  # Windows start at 1
set -g pane-base-index 1             # Panes start at 1
set-window-option -g pane-base-index 1
set-option -g renumber-windows on    # Renumber windows when one is closed

# ----- Performance -----
set -g history-limit 50000           # Large scrollback
set -sg escape-time 0                # Fast command sequences
set -g display-time 1500             # Messages visible longer
set -g status-interval 5             # Update status every 5 seconds

# ----- Visual Feedback -----
set -g focus-events on               # Better terminal integration
set -g monitor-activity on          # Monitor for activity
set -g visual-activity off          # Don't show activity messages

# ----- Copy Mode Improvements -----
set-window-option -g mode-keys vi    # Vim-style copy mode

# ----- Mouse Selection Enhancements -----
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi V send-keys -X select-line  
bind-key -T copy-mode-vi r send-keys -X rectangle-toggle
bind-key -T copy-mode-vi Escape send-keys -X cancel

# Smart mouse integration
bind-key -T root MouseDrag1Pane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "copy-mode -M"
bind-key -T root DoubleClick1Pane select-pane \; copy-mode -M \; send-keys -X select-word
bind-key -T root TripleClick1Pane select-pane \; copy-mode -M \; send-keys -X select-line

# ----- Cross-Platform Clipboard -----
# macOS
if-shell "test $(uname) = 'Darwin'" \
    "bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'pbcopy'"

# Linux X11
if-shell "test $(uname) = 'Linux' && command -v xclip" \
    "bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'xclip -in -selection clipboard'"

# Linux Wayland
if-shell "test $(uname) = 'Linux' && command -v wl-copy && test -n '$WAYLAND_DISPLAY'" \
    "bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'wl-copy'"

# WSL
if-shell "test -n '$WSL_DISTRO_NAME' || grep -qi microsoft /proc/version 2>/dev/null" \
    "bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'clip.exe'"